{"version":3,"sources":["scripts/app-01ca85308e.js"],"names":["encodeURI","startsWithLetter","items","letter","filtered","l","length","letterMatch","RegExp","i","item","test","title","substring","push","property","$filter","getValue","element","propertyArray","value","angular","forEach","parseString","input","split","array","propertyString","target","properties","limitString","wordwise","max","tail","parseInt","substr","lastspace","lastIndexOf","module","filter","$inject","motoNavbar","restrict","templateUrl","controller","controllerAs","link","$scope","navFn","wrapper","classList","contains","add","navIcon","remove","document","getElementById","navTag","getElementsByClassName","addEventListener","navTagFunction","subMenu","this","nextElementSibling","directive","NavbarController","$location","vm","menuClass","page","current","path","carouselar","$window","CarouselarConstants","replace","scope","images","attrs","maxImageCount","Math","min","displayingImageCount","MAX_DISPLAYING_IMAGE","win","bind","onResize","$on","unbind","carouselarImage","$compile","isVisible","imgUrl","date","categoryUrl","tag","headingUrl","template","compileImage","append","contents","carouselarLoader","onLoad","CarouselarController","$timeout","news","$interval","newValue","sectionCount","ceil","moveToSection","activeSection","singleImageWidth","list","visibleImages","containerPosition","createArray","num","Array","prev","next","sectionIndex","pos","imagePercentage","firstVisibleImageIndex","resizeTimer","event","_width","cancel","windowWidth","innerWidth","BREAKPOINTS","LANDSCAPE","PORTRAIT","RESIZE_TIMEOUT","$watch","isImageVisible","imageIndex","indexOf","CarouselarImageController","unwatch","isLoading","$apply","$http","getData","callback","method","url","cache","success","find","data","entry","factory","MainController","runBlock","$log","debug","run","routeConfig","$routeProvider","when","otherwise","redirectTo","config","constant","$logProvider","debugEnabled","$templateCache","put"],"mappings":"CAAA,WACE,YAmBE,SAASA,KACL,MAAOA,GAGX,QAASC,KAEP,MAAO,UAAUC,EAAOC,GAItB,IAAK,GAHDC,MACAC,EAAIH,EAAMI,OACVC,EAAc,GAAIC,QAAOL,EAAQ,KAC5BM,EAAI,EAAOJ,EAAJI,EAAOA,IAAK,CAC1B,GAAIC,GAAOR,EAAMO,EACbF,GAAYI,KAAKD,EAAKE,MAAMC,UAAU,EAAG,MAC3CT,EAASU,KAAKJ,GAGlB,MAAON,IAKX,QAASW,GAASC,GAMhB,QAASC,GAASC,EAASC,GACzB,GAAIC,GAAQF,CAMZ,OAJAG,SAAQC,QAAQH,EAAe,SAASJ,GACtCK,EAAQA,EAAML,KAGTK,EAXT,GAAIG,GAAc,SAASC,GACzB,MAAOA,GAAMC,MAAM,KAarB,OAAO,UAAUC,EAAOC,EAAgBC,GACtC,GAAIC,GAAaN,EAAYI,EAE7B,OAAOX,GAAQ,UAAUU,EAAO,SAAShB,GACvC,MAAOO,GAASP,EAAMmB,KAAgBD,KAM5C,QAASE,KAEP,MAAO,UAAUV,EAAOW,EAAUC,EAAKC,GACrC,IAAKb,EAAO,MAAO,EAGnB,IADAY,EAAME,SAASF,EAAK,KACfA,EAAK,MAAOZ,EACjB,IAAIA,EAAMd,QAAU0B,EAAK,MAAOZ,EAGhC,IADAA,EAAQA,EAAMe,OAAO,EAAGH,GACpBD,EAAU,CACZ,GAAIK,GAAYhB,EAAMiB,YAAY,IACjB,KAAbD,IACFhB,EAAQA,EAAMe,OAAO,EAAGC,IAI5B,MAAOhB,IAASa,GAAQ,OAjF9BZ,QACGiB,OAAO,QACN,YACA,YACA,UACA,aACA,aACA,SACA,aACA,YAGDC,OAAO,YAAavC,GACpBuC,OAAO,mBAAoBtC,GAC3BsC,OAAO,WAAYxB,GACnBwB,OAAO,cAAeT,GAgDvBf,EAASyB,SAAW,cAyBvB,WACC,YAQE,SAASC,KAEP,OACEC,SAAU,IACVC,YAAa,oCACbC,WAAY,mBACZC,aAAc,KACdC,KAAM,SAASC,GAOb,QAASC,KACHD,EAAOE,QAAQC,UAAUC,SAAS,eAAgB,GACpDJ,EAAOE,QAAQC,UAAUE,IAAI,YAC7BL,EAAOM,QAAQH,UAAUE,IAAI,WAE7BL,EAAOE,QAAQC,UAAUI,OAAO,YAChCP,EAAOM,QAAQH,UAAUI,OAAO,UAVpCP,EAAOE,QAAUM,SAASC,eAAe,gBACzCT,EAAOM,QAAUE,SAASC,eAAe,SACzCT,EAAOU,OAASF,SAASG,uBAAuB,YAahDX,EAAOM,QAAQM,iBAAiB,QAASX,GAAO,EAehD,KAAI,GAZAY,GAAiB,WAEnB,GAAIC,GAAUC,KAAKC,kBAEJ,QAAZF,GAAoBA,EAAQX,UAAUC,SAAS,iBAAkB,EAClEU,EAAQX,UAAUE,IAAI,cAEtBS,EAAQX,UAAUI,OAAO,eAKrB7C,EAAE,EAAGA,EAAEsC,EAAOU,OAAOnD,OAAQG,IACnCsC,EAAOU,OAAOhD,GAAGkD,iBAAiB,QAASC,GAAgB,KA/CrEvC,QACGiB,OAAO,QACP0B,UAAU,aAAcvB,MAwE5B,WACA,YAQG,SAASwB,GAAiBC,GAExB,GAAIC,GAAKL,IAETK,GAAGC,UAAY,SAASC,GAGtB,MADAF,GAAGG,QAAUJ,EAAUK,OAAO1D,UAAU,GACjCwD,IAASF,EAAGG,QAAU,kBAAoB,IAbvDjD,QACGiB,OAAO,QACPM,WAAW,mBAAoBqB,GAiBhCA,EAAiBzB,SAAW,gBAEhC,WACE,YAQA,SAASgC,GAAWC,EAASC,GACvB,OACEC,SAAS,EACTjC,SAAU,KACVkC,OACEC,OAAQ,KAEVlC,YAAa,wCACbC,WAAY,uBACZC,aAAc,KACdC,KAAM,SAAS8B,EAAO1D,EAAS4D,GAE7BF,EAAMT,GAAGY,cAAgBC,KAAKC,IAC9B/C,SAAS4C,EAAMI,sBAAuBR,EAAoBS,uBAAyB,CAEnF,IAAIC,GAAM/D,QAAQH,QAAQuD,EAC1BW,GAAIC,KAAK,SAAUT,EAAMU,UACzBV,EAAMU,WAENV,EAAMW,IAAI,WAAY,WACpBH,EAAII,OAAO,SAAUZ,EAAMU,cAWvC,QAASG,GAAgBC,GACvB,OACEhD,SAAU,IACVkC,OACEe,UAAW,IACXC,OAAQ,IACRC,KAAM,IACNC,YAAa,IACbC,IAAK,IACLC,WAAY,KAEdC,SAAU,8DACVrD,WAAY,4BACZC,aAAc,KACdC,KAAM,SAAS8B,EAAO1D,GAEpB0D,EAAMT,GAAG+B,aAAe,WAEtBhF,EAAQiF,OACJ,gGAEJjF,EAAQiF,OACJ,kDAEJjF,EAAQiF,OACJ,4GAEJjF,EAAQiF,OACJ,8EAEJT,EAASxE,EAAQkF,YAAYxB,MAWrC,QAASyB,KACP,OACE3D,SAAU,IACVkC,OACE0B,OAAQ,KAEVxD,KAAM,SAAS8B,EAAO1D,GACpBA,EAAQmE,KAAK,OAAQT,EAAM0B,UAnFnCjF,QACGiB,OAAO,QACP0B,UAAU,aAAcQ,GA8BrBA,EAAWhC,SAAW,UAAW,uBADvCnB,QACGiB,OAAO,QACP0B,UAAU,kBAAmByB,GAyC9BA,EAAgBjD,SAAW,YAF7BnB,QACGiB,OAAO,QACP0B,UAAU,mBAAoBqC,MAgBjC,WACE,YAQA,SAASE,GAAqBxD,EAAQyD,EAAU/B,EAASC,EAAqB+B,EAAMC,GA6FlF,QAASxB,GAAqByB,GACxBA,IACFxC,EAAGyC,aAAe5B,KAAK6B,KACvB1C,EAAGsC,KAAKnG,OAASyC,EAAOmC,sBACxBf,EAAG2C,cAAc3C,EAAG4C,eACpB5C,EAAG6C,iBAAoB,IAAML,EAAY,KAhG7C,GAAIxC,GAAKL,IAET2C,GAAKQ,KAAK,SAASR,GACjBtC,EAAGsC,KAAOA,IAGZtC,EAAG+C,iBACH/C,EAAGY,cAAgB,EAEnBhC,EAAOmC,qBAAuB,EAC9Bf,EAAG4C,cAAgB,EACnB5C,EAAGyC,aAAe,EAClBzC,EAAGgD,kBAAoB,gBACvBhD,EAAG6C,iBAAmB,OAEtB7C,EAAGiD,YAAc,SAASC,GACxB,MAAO,IAAIC,OAAMD,GAAO,IAG1BlD,EAAGoD,KAAO,WACRpD,EAAG2C,cAAc3C,EAAG4C,cAAgB,IAGtC5C,EAAGqD,KAAO,WACRrD,EAAG2C,cAAc3C,EAAG4C,cAAgB,IAGtCL,EAAW,WACTvC,EAAGqD,QACH,KAEFrD,EAAG2C,cAAgB,SAASW,GACtBA,GAAgBtD,EAAGyC,aACrBzC,EAAG4C,cAAgB,EAEK,EAAfU,EACTtD,EAAG4C,cAAgB5C,EAAGyC,aAAe,EAGrCzC,EAAG4C,cAAgBU,CAIrB,IAAIC,GAGAjH,EAFAkH,EAAkB,IAAM5E,EAAOmC,qBAC/BgC,IAGJ,IAAI/C,EAAG4C,gBAAkB5C,EAAGyC,aAAe,EAGzC,IAFAc,GAAOvD,EAAGsC,KAAKnG,OAASyC,EAAOmC,sBAAwByC,EAElDlH,EAAI,EAAGA,EAAIsC,EAAOmC,qBAAuB,EAAGzE,IAC/CyG,EAAcpG,KAAKqD,EAAGsC,KAAKnG,OAASG,OAGjC,CACL,GAAImH,GAAyBzD,EAAG4C,cAAgBhE,EAAOmC,oBAGvD,KADAgC,EAAcpG,KAAK8G,GACdnH,EAAI,EAAGA,EAAIsC,EAAOmC,qBAAsBzE,IAC3CyG,EAAcpG,KAAK8G,EAAyBnH,EAG9CiH,GAAME,EAAyBD,EAGjCxD,EAAGgD,kBAAoB,eAAiBO,EAAM,KAC9CvD,EAAG+C,cAAgBA,GAGrB/C,EAAG0D,YAAc,KACjB9E,EAAOuC,SAAW,SAASwC,EAAOC,GAChCvB,EAASwB,OAAO7D,EAAG0D,aACnB1D,EAAG0D,YAAcrB,EAAS,WACxB,GAAItB,GAAuBf,EAAGY,cAC1BkD,EAAcF,GAAUtD,EAAQyD,UAEhCD,GAAcvD,EAAoByD,YAAYC,YAChDlD,EAAuBF,KAAK6B,KAAK1C,EAAGY,cAAgB,GAEhDkD,EAAcvD,EAAoByD,YAAYE,WAChDnD,EAAuB,IAI3BnC,EAAOmC,qBAAuBA,GAC7BR,EAAoB4D,iBAGzBvF,EAAOwF,OAAO,uBAAwBrD,GAWtCf,EAAGqE,eAAiB,SAASC,GAC3B,MAAOtE,GAAG+C,cAAcwB,QAAQD,GAAc,IASlD,QAASE,GAA0B5F,GASjC,QAAS4C,GAAUA,GACbA,IACFxB,EAAG+B,eACH0C,KAXJ,GAAIzE,GAAKL,IACTK,GAAG0E,WAAY,EACf1E,EAAGmC,OAAS,WACVnC,EAAG0E,WAAY,EACf9F,EAAO+F,SAGT,IAAIF,GAAU7F,EAAOwF,OAAO,YAAa5C,GA5H7CtE,QACGiB,OAAO,QACPM,WAAW,uBAAwB2D,GAiHpCA,EAAqB/D,SAAW,SAAU,WAAY,UAAW,sBAAuB,OAAQ,aAHlGnB,QACGiB,OAAO,QACPM,WAAW,4BAA6B+F,GAuBzCA,EAA0BnG,SAAW,aAFvC,WACE,YAQI,SAASiE,GAAKsC,GAEZ,QAASC,GAAQC,GACbF,GACEG,OAAQ,MACRC,IAAK,yBACLC,OAAO,IACNC,QAAQJ,GAGf,OACEhC,KAAM+B,EACNM,KAAM,SAAU1I,EAAOqI,GACnBD,EAAQ,SAAUO,GACd,GAAI9C,GAAO8C,EAAKhH,OAAO,SAAUiH,GAC7B,MAAOA,GAAM5I,QAAUA,IACxB,EACHqI,GAASxC,OAvBzBpF,QACGiB,OAAO,QACPmH,QAAQ,OAAQhD,GAiCfA,EAAKjE,SAAW,YAHtB,WACE,YAQA,SAASkH,GAAejD,GAEtB,GAAItC,GAAKL,IAET2C,GAAKQ,KAAK,SAASR,GACjBtC,EAAGsC,KAAOA,IAXdpF,QACGiB,OAAO,QACPM,WAAW,iBAAkB8G,GAoBhCA,EAAelH,SAAW,WAJ5B,WACE,YAOA,SAASmH,GAASC,GAEhBA,EAAKC,MAAM,gBAPbxI,QACGiB,OAAO,QACPwH,IAAIH,GAePA,EAASnH,SAAW,WALtB,WACE,YASE,SAASuH,GAAYC,GACnBA,EACGC,KAAK,KACFtH,YAAa,qBACbC,WAAY,iBACZC,aAAc,OAEjBoH,KAAK,oBACFtH,YAAa,gCACbC,WAAY,WACZC,aAAc,OAEjBoH,KAAK,gCACFtH,YAAa,sCACbC,WAAY,cACZC,aAAc,OAEjBqH,WACGC,WAAY,MAzBtB9I,QACGiB,OAAO,QACP8H,OAAOL,GAmCRA,EAAYvH,SAAW,qBAD3B,WACE,YAEAnB,SACGiB,OAAO,QACP+H,SAAS,uBACR/B,eAAgB,IAChBnD,qBAAsB,EACtBgD,aACEC,UAAW,IACXC,SAAU,UAMlB,WACE,YAQA,SAAS+B,GAAOE,GAEdA,EAAaC,cAAa,GAR5BlJ,QACGiB,OAAO,QACP8H,OAAOA,GAmBVA,EAAO5H,SAAW,mBAPpBnB,QAAQiB,OAAO,QAAQwH,KAAK,iBAAkB,SAASU,GAAiBA,EAAeC,IAAI,qBAAqB,y8FAChHD,EAAeC,IAAI,wCAAwC,mnCAC3DD,EAAeC,IAAI,oCAAoC","file":"scripts/app-01ca85308e.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('moto', [\n      'ngAnimate',\n      'ngCookies',\n      'ngTouch',\n      'ngSanitize',\n      'ngMessages',\n      'ngAria',\n      'ngResource',\n      'ngRoute'\n    ])\n\n    .filter('encodeURI', encodeURI)                 // Filter for URL\n    .filter('startsWithLetter', startsWithLetter)   // Filter for search input\n    .filter('property', property)                   // Filter for category\n    .filter('limitString', limitString);            // Filter for character limit\n\n    function encodeURI() {\n        return encodeURI;\n    }\n\n    function startsWithLetter() {\n\n      return function (items, letter) {\n        var filtered = [];\n        var l = items.length;\n        var letterMatch = new RegExp(letter, 'i');\n        for (var i = 0; i < l; i++) {\n          var item = items[i];\n          if (letterMatch.test(item.title.substring(0, 32))) {\n            filtered.push(item);\n          }\n        }\n        return filtered;\n      };\n\n    }\n\n    function property($filter) {\n\n      var parseString = function(input){\n        return input.split('.');\n      };\n\n      function getValue(element, propertyArray) {\n        var value = element;\n\n        angular.forEach(propertyArray, function(property) {\n          value = value[property];\n        });\n\n        return value;\n      }\n\n      return function (array, propertyString, target) {\n        var properties = parseString(propertyString);\n\n        return $filter('filter')(array, function(item){\n          return getValue(item, properties) === target;\n        });\n      };\n\n    }\n\n    function limitString() {\n\n      return function (value, wordwise, max, tail) {\n        if (!value) return '';\n\n        max = parseInt(max, 10);\n        if (!max) return value;\n        if (value.length <= max) return value;\n\n        value = value.substr(0, max);\n        if (wordwise) {\n          var lastspace = value.lastIndexOf(' ');\n          if (lastspace != -1) {\n            value = value.substr(0, lastspace);\n          }\n        }\n\n        return value + (tail || ' …');\n        // usage ex:  | limitString:true:100:' ...'\n      };\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('moto')\n    .directive('motoNavbar', motoNavbar);\n\n  /** @ngInject */\n\n    function motoNavbar() {\n\n      return {\n        restrict: 'E',\n        templateUrl: 'app/components/navbar/navbar.html',\n        controller: 'NavbarController',\n        controllerAs: 'vm',\n        link: function($scope) {\n\n          // TODO: use $document to get elements\n          $scope.wrapper = document.getElementById('site-wrapper');\n          $scope.navIcon = document.getElementById('cross');\n          $scope.navTag = document.getElementsByClassName('linkName');\n\n          function navFn() {\n            if ($scope.wrapper.classList.contains('show-nav') === false) {\n              $scope.wrapper.classList.add('show-nav');\n              $scope.navIcon.classList.add('cross');\n            } else {\n              $scope.wrapper.classList.remove('show-nav');\n              $scope.navIcon.classList.remove('cross');\n            }\n          }\n\n          // bind on click function to Menu\n          $scope.navIcon.addEventListener('click', navFn, false);\n\n          // bind on click function to Menu List Items\n          var navTagFunction = function() {\n\n            var subMenu = this.nextElementSibling;\n\n            if(subMenu !== null && subMenu.classList.contains('expandItem') === false) {\n              subMenu.classList.add('expandItem');\n            } else {\n              subMenu.classList.remove('expandItem');\n            }\n\n          };\n\n          for(var i=0; i<$scope.navTag.length; i++) {\n            $scope.navTag[i].addEventListener('click', navTagFunction, false);\n          }\n\n          // TODO: Add hammer swipe function\n          //// create a hammer swipe instance\n          //$scope.vm = new Hammer($scope.wrapper);\n          //\n          //// listen to swipe events\n          //$scope.vm.on('swiperight', function(e) {\n          //  $scope.wrapper.classList.add('show-nav');\n          //  $scope.navIcon.classList.add('cross');\n          //  e.preventDefault();\n          //});\n          //$scope.vm.on('swipeleft', function(e) {\n          //  $scope.wrapper.classList.remove('show-nav');\n          //  $scope.navIcon.classList.remove('cross');\n          //  e.preventDefault();\n          //});\n\n        }\n\n      };\n\n  }\n\n}());\n\n(function () {\n 'use strict';\n\n  angular\n    .module('moto')\n    .controller('NavbarController', NavbarController);\n\n    /** @ngInject */\n\n    function NavbarController($location) {\n\n      var vm = this;\n\n      vm.menuClass = function(page) {\n\n        vm.current = $location.path().substring(1);\n        return page === vm.current ? 'ms-menu__active' : '';\n\n      };\n\n    }\n\n}());\n\n(function() {\n  'use strict';\n\n  /** @ngInject */\n\nangular\n  .module('moto')\n  .directive('carouselar', carouselar);\n\n  function carouselar($window, CarouselarConstants) {\n        return {\n          replace: true,\n          restrict: 'AE',\n          scope: {\n            images: '='\n          },\n          templateUrl: 'app/components/carousel/carousel.html',\n          controller: 'CarouselarController',\n          controllerAs: 'vm',\n          link: function(scope, element, attrs) {\n\n            scope.vm.maxImageCount = Math.min(\n            parseInt(attrs.displayingImageCount), CarouselarConstants.MAX_DISPLAYING_IMAGE) || 1;\n\n            var win = angular.element($window);\n            win.bind('resize', scope.onResize);\n            scope.onResize();\n\n            scope.$on('$destroy', function() {\n              win.unbind('resize', scope.onResize);\n            });\n\n          }\n        };\n      }\n\nangular\n  .module('moto')\n  .directive('carouselarImage', carouselarImage);\n\n  function carouselarImage($compile) {\n    return {\n      restrict: 'E',\n      scope: {\n        isVisible: '=',\n        imgUrl: '@',\n        date: '@',\n        categoryUrl: '@',\n        tag: '@',\n        headingUrl: '@'\n      },\n      template: '<div class=\"carouselar__loader\" ng-if=\"vm.isLoading\"></div>',\n      controller: 'CarouselarImageController',\n      controllerAs: 'vm',\n      link: function(scope, element) {\n\n        scope.vm.compileImage = function() {\n\n          element.append(\n              '<img class=\"carouselar__image\" carouselar-loader on-load=\"vm.onLoad()\" ng-src=\"{{imgUrl}}\"/>');\n\n          element.append(\n              '<date class=\"carouselar__date\">{{date}}</date>');\n\n          element.append(\n              '<h4 class=\"carouselar__heading\"><a ng-href=\"news/{{categoryUrl}}/{{headingUrl}}\">{{headingUrl}}</a></h4>');\n\n          element.append(\n              '<span class=\"carouselar__cat\"><a ng-href=\"news/{{tag}}\">{{tag}}</a></span>');\n\n          $compile(element.contents())(scope);\n\n        };\n      }\n    };\n  }\n\nangular\n  .module('moto')\n  .directive('carouselarLoader', carouselarLoader);\n\n  function carouselarLoader() {\n    return {\n      restrict: 'A',\n      scope: {\n        onLoad: '&'\n      },\n      link: function(scope, element) {\n        element.bind('load', scope.onLoad);\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  /** @ngInject */\n\nangular\n  .module('moto')\n  .controller('CarouselarController', CarouselarController);\n\n  function CarouselarController($scope, $timeout, $window, CarouselarConstants, news, $interval) {\n\n    var vm = this;\n\n    news.list(function(news) {\n      vm.news = news;\n    });\n\n    vm.visibleImages = [];\n    vm.maxImageCount = 1;\n    // TODO: Fix controller as to 'vm'\n    $scope.displayingImageCount = 0;\n    vm.activeSection = 0;\n    vm.sectionCount = 5;\n    vm.containerPosition = 'translateX(0)';\n    vm.singleImageWidth = '100%';\n\n    vm.createArray = function(num) {\n      return new Array(num || 0);\n    };\n\n    vm.prev = function() {\n      vm.moveToSection(vm.activeSection - 1);\n    };\n\n    vm.next = function() {\n      vm.moveToSection(vm.activeSection + 1);\n    };\n\n    $interval( function(){\n      vm.next();\n    },5000);\n\n    vm.moveToSection = function(sectionIndex) {\n      if (sectionIndex >= vm.sectionCount) {\n        vm.activeSection = 0;\n\n      } else if (sectionIndex < 0) {\n        vm.activeSection = vm.sectionCount - 1;\n\n      } else {\n        vm.activeSection = sectionIndex;\n      }\n\n      // update container position & visible images:\n      var pos;\n      var imagePercentage = 100 / $scope.displayingImageCount;\n      var visibleImages = [];\n      var i;\n\n      if (vm.activeSection === vm.sectionCount - 1) { // last section\n        pos = (vm.news.length - $scope.displayingImageCount) * imagePercentage;\n\n        for (i = 0; i < $scope.displayingImageCount + 1; i++) {\n          visibleImages.push(vm.news.length - i);\n        }\n\n      } else {\n        var firstVisibleImageIndex = vm.activeSection * $scope.displayingImageCount;\n\n        visibleImages.push(firstVisibleImageIndex);\n        for (i = 1; i < $scope.displayingImageCount; i++) {\n          visibleImages.push(firstVisibleImageIndex + i);\n        }\n\n        pos = firstVisibleImageIndex * imagePercentage;\n      }\n\n      vm.containerPosition = 'translateX(-' + pos + '%)';\n      vm.visibleImages = visibleImages;\n    };\n\n    vm.resizeTimer = null;\n    $scope.onResize = function(event, _width) {\n      $timeout.cancel(vm.resizeTimer);\n      vm.resizeTimer = $timeout(function() {\n        var displayingImageCount = vm.maxImageCount;\n        var windowWidth = _width || $window.innerWidth;\n\n        if (windowWidth < CarouselarConstants.BREAKPOINTS.LANDSCAPE) {\n          displayingImageCount = Math.ceil(vm.maxImageCount / 2);\n\n          if (windowWidth < CarouselarConstants.BREAKPOINTS.PORTRAIT) {\n            displayingImageCount = 1;\n          }\n        }\n\n        $scope.displayingImageCount = displayingImageCount;\n      }, CarouselarConstants.RESIZE_TIMEOUT);\n    };\n\n    $scope.$watch('displayingImageCount', displayingImageCount);\n\n    function displayingImageCount(newValue) {\n      if (newValue) {\n        vm.sectionCount = Math.ceil(\n        vm.news.length / $scope.displayingImageCount);\n        vm.moveToSection(vm.activeSection); // TODO: keep first image in sight\n        vm.singleImageWidth = (100 / newValue) + '%';\n      }\n    }\n\n    vm.isImageVisible = function(imageIndex) {\n      return vm.visibleImages.indexOf(imageIndex) > -1;\n    };\n\n  }\n\nangular\n  .module('moto')\n  .controller('CarouselarImageController', CarouselarImageController);\n\n  function CarouselarImageController($scope) {\n    var vm = this;\n    vm.isLoading = true;\n    vm.onLoad = function() {\n      vm.isLoading = false;\n      $scope.$apply();\n    };\n\n    var unwatch = $scope.$watch('isVisible', isVisible);\n    function isVisible(isVisible) {\n      if (isVisible) {\n        vm.compileImage();\n        unwatch();\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('moto')\n    .factory('news', news);\n\n      /** @ngInject */\n\n      function news($http) {\n\n        function getData(callback) {\n            $http({\n              method: 'GET',\n              url: 'app/data/articles.json',\n              cache: true\n            }).success(callback);\n        }\n\n        return {\n          list: getData,\n          find: function (title, callback) {\n              getData(function (data) {\n                  var news = data.filter(function (entry) {\n                      return entry.title === title;\n                  })[0];\n                  callback(news);\n              });\n          }\n        };\n\n      }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('moto')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n\n  function MainController(news) {\n\n    var vm = this;\n\n    news.list(function(news) {\n      vm.news = news;\n    });\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('moto')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('moto')\n    .config(routeConfig);\n\n    //TODO: Config the $locationProvider for pretty URL\n    //.config(locationConfig);\n\n    function routeConfig($routeProvider) {\n      $routeProvider\n        .when('/', {\n            templateUrl: 'app/main/main.html',\n            controller: 'MainController',\n            controllerAs: 'vm'\n        })\n        .when('/news/:category?', {\n            templateUrl: 'app/components/news/news.html',\n            controller: 'NewsCtrl',\n            controllerAs: 'vm'\n        })\n        .when('/news/:category/:articleName', {\n            templateUrl: 'app/components/article/article.html',\n            controller: 'ArticleCtrl',\n            controllerAs: 'vm'\n        })\n        .otherwise({\n            redirectTo: '/'\n        });\n    }\n\n    //function locationConfig($locationProvider) {\n    //    // use the HTML5 History API\n    //    $locationProvider.html5Mode(true);\n    //}\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('moto')\n    .constant('CarouselarConstants', {\n      RESIZE_TIMEOUT: 1000,\n      MAX_DISPLAYING_IMAGE: 5,\n      BREAKPOINTS: {\n        LANDSCAPE: 960,\n        PORTRAIT: 640\n      }\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('moto')\n    .config(config);\n\n  /** @ngInject */\n\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n  }\n\n})();\n\nangular.module(\"moto\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<section class=\\\"ms-container\\\"><section class=\\\"mainLeft\\\"><div class=\\\"sliderWrp\\\"><moto-slider class=\\\"motoSlider mainSlider\\\" slider-instance=\\\"slider\\\" current-slide=\\\"actualslide\\\" transition-property=\\\"opacity\\\" start-value=\\\"0\\\" visible-value=\\\"1\\\" end-value=\\\"0\\\" auto-play=\\\"true\\\" transition-delay=\\\"4\\\"><figure class=\\\"figure\\\" ng-repeat=\\\"article in vm.news\\\"><img ng-src=\\\"{{article.images.img1}}\\\" alt=\\\"{{article.title}}\\\"><figcaption><h2><a ng-href=\\\"news/{{article.category}}/{{article.title | encodeURI}}\\\">{{article.title | limitString:true:48:\\' ...\\'}}</a></h2></figcaption></figure></moto-slider><button type=\\\"button\\\" class=\\\"sliderWrp__prev\\\" ng-model=\\\"actualslide\\\" ng-click=\\\"slider.prev()\\\"></button> <button type=\\\"button\\\" class=\\\"sliderWrp__next\\\" ng-model=\\\"actualslide\\\" ng-click=\\\"slider.next()\\\"></button></div><div class=\\\"mainThm\\\"><div class=\\\"mainThm__inner\\\" ng-repeat=\\\"article in vm.news | property:\\'category\\':\\'rally\\' | orderBy:\\'-date\\' | limitTo:-4\\\"><img src=\\\"{{article.images.img1}}\\\" alt=\\\"{{article.title}}\\\"><h4 class=\\\"mainThm__inner--title\\\"><a ng-href=\\\"news/{{article.category}}/{{article.title | encodeURI}}\\\">{{article.title | limitString:true:50:\\' ...\\'}}</a></h4><date class=\\\"mainThm__inner--date\\\">{{article.date | date:\\'medium\\'}}</date><p class=\\\"mainThm__inner--content\\\">{{article.post.content | limitString:true:200:\\' ...\\'}}</p><span class=\\\"mainThm__inner--cat\\\"><a ng-href=\\\"news/{{article.category}}\\\">{{article.category}}</a></span></div></div><div class=\\\"sliderWrp gp\\\"><moto-slider class=\\\"motoSlider mainSliderGp\\\" slider-instance=\\\"slidergp\\\" current-slide=\\\"actualslideGp\\\" transition-property=\\\"opacity\\\" start-value=\\\"0\\\" visible-value=\\\"1\\\" end-value=\\\"0\\\" auto-play=\\\"true\\\"><figure class=\\\"figure\\\" ng-repeat=\\\"article in vm.news | property:\\'category\\':\\'motogp\\'\\\"><img ng-src=\\\"{{article.images.img1}}\\\" alt=\\\"{{article.title}}\\\"><figcaption><h2><a ng-href=\\\"news/{{article.category}}/{{article.title | encodeURI}}\\\">{{article.title | limitString:true:48:\\' ...\\'}}</a></h2></figcaption></figure></moto-slider><button type=\\\"button\\\" class=\\\"sliderWrp__prev\\\" ng-model=\\\"actualslideGp\\\" ng-click=\\\"slidergp.prev()\\\"></button> <button type=\\\"button\\\" class=\\\"sliderWrp__next\\\" ng-model=\\\"actualslideGp\\\" ng-click=\\\"slidergp.next()\\\"></button></div><div class=\\\"mainThm\\\"><div class=\\\"mainThm__inner\\\" ng-repeat=\\\"article in vm.news | property:\\'category\\':\\'vintage\\' | orderBy:\\'-date\\' | limitTo:-4\\\"><img src=\\\"{{article.images.img1}}\\\" alt=\\\"{{article.title}}\\\"><h4 class=\\\"mainThm__inner--title\\\"><a ng-href=\\\"news/{{article.category}}/{{article.title | encodeURI}}\\\">{{article.title | limitString:true:50:\\' ...\\'}}</a></h4><date class=\\\"mainThm__inner--date\\\">{{article.date | date:\\'medium\\'}}</date><p class=\\\"mainThm__inner--content\\\">{{article.post.content | limitString:true:200:\\' ...\\'}}</p><span class=\\\"mainThm__inner--cat\\\"><a ng-href=\\\"news/{{article.category}}\\\">{{article.category}}</a></span></div></div></section><aside class=\\\"mainRight\\\"><carouselar displaying-image-count=\\\"3\\\"></carouselar><right-column></right-column></aside></section>\");\n$templateCache.put(\"app/components/carousel/carousel.html\",\"<div class=\\\"ms-container carouselar\\\"><div class=\\\"carouselar__navigation\\\"><span class=\\\"carouselar__navigation__button carouselar__navigation__button--prev\\\" ng-click=\\\"vm.prev()\\\">PREV</span><div class=\\\"carouselar__navigation__index\\\"><span class=\\\"carouselar__navigation__button carouselar__navigation__button--index\\\" ng-repeat=\\\"i in vm.createArray(vm.sectionCount) track by $index\\\" ng-class=\\\"{carouselar__navigation__button__active: $index === vm.activeSection}\\\" ng-click=\\\"vm.moveToSection($index)\\\">{{$index + 1}}</span></div><span class=\\\"carouselar__navigation__button carouselar__navigation__button--next\\\" ng-click=\\\"vm.next()\\\">NEXT</span></div><div class=\\\"carouselar__container\\\"><div class=\\\"carouselar__inner-container\\\" ng-style=\\\"{transform: vm.containerPosition}\\\"><carouselar-image class=\\\"carouselar__image-container\\\" ng-style=\\\"{width: vm.singleImageWidth}\\\" ng-repeat=\\\"article in vm.news\\\" is-visible=\\\"vm.isImageVisible($index)\\\" img-url=\\\"{{article.images.img1}}\\\" date=\\\"{{article.date | date:\\'medium\\'}}\\\" category-url=\\\"{{article.category}}\\\" heading-url=\\\"{{article.title}}\\\" tag=\\\"{{article.category}}\\\"></carouselar-image></div></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<div class=\\\"topnav\\\"><div id=\\\"cross\\\" class=\\\"topnav__icon\\\"><span class=\\\"topnav__icon--item one\\\"></span> <span class=\\\"topnav__icon--item two\\\"></span> <span class=\\\"topnav__icon--item three\\\"></span></div></div><nav class=\\\"ms-container ms-navbar\\\"><ul class=\\\"ms-menu\\\"><li ng-class=\\\"menuClass(\\'#/\\')\\\"><a class=\\\"linkName\\\" href=\\\"/\\\">Home</a></li><li ng-class=\\\"menuClass(\\'news\\')\\\"><a class=\\\"linkName\\\" ng-href=\\\"news\\\">Latest News</a><ul class=\\\"sub_Menu\\\"><li class=\\\"sub_Link\\\" ng-class=\\\"menuClass(\\'#/news/f1\\')\\\"><a ng-href=\\\"news/f1\\\">Formula 1 News</a></li><li class=\\\"sub_Link\\\" ng-class=\\\"menuClass(\\'#/news/motogp\\')\\\"><a ng-href=\\\"news/motogp\\\">Moto GP News</a></li><li class=\\\"sub_Link\\\" ng-class=\\\"menuClass(\\'#/news/rally\\')\\\"><a ng-href=\\\"news/rally\\\">World Rallycross</a></li><li class=\\\"sub_Link\\\" ng-class=\\\"menuClass(\\'#/news/vintage\\')\\\"><a ng-href=\\\"news/vintage\\\">Vintage</a></li><li class=\\\"sub_Link\\\" ng-class=\\\"menuClass(\\'#/news/v8 supercars\\')\\\"><a ng-href=\\\"news/v8 supercars\\\">V8 Supercars</a></li></ul></li><li ng-class=\\\"menuClass(\\'gallery\\')\\\"><a class=\\\"linkName\\\" ng-href=\\\"gallery\\\">Gallery</a></li><li ng-class=\\\"menuClass(\\'about\\')\\\"><a class=\\\"linkName\\\" ng-href=\\\"about\\\">About</a></li><li ng-class=\\\"menuClass(\\'contact\\')\\\"><a class=\\\"linkName\\\" ng-href=\\\"contact\\\">Contact</a></li></ul></nav>\");}]);"],"sourceRoot":"/source/"}